
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Evolving Models &#8212; Smithy 1.0 documentation</title><link rel="stylesheet" href="../../_static/bootstrap-reboot.css" type="text/css" />
    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/default.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" href="../../_static/custom-tabs.css" type="text/css" />

    
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/smithy.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Style Guide" href="style-guide.html" />
    <link rel="prev" title="Model linters" href="model-linters.html" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="smithy-version" content="1.0">

  </head><body>
    <header>
        <div class="header-flex width-wrapper">
            <div class="site-logo">
                <a href="../../index.html">
                    <span class="logo-icon">üî®Ô∏è</span><span class="logo-text">Smithy</span>
                </a>
                <span class="version-text">1.0</span>
            </div>
            <ul id="page-navigation">
                <li class="site-page first"><a href="../../quickstart.html">Quick Start</a></li>
                <li class="site-page"><a href="../spec/index.html">Specifications</a></li>
                <li class="site-page"><a href="index.html">Guides</a></li>
                <li class="site-page"><a href="https://github.com/awslabs/smithy">Code</a></li>
                <li class="site-search hidden-sm">
                    <form action="../../search.html" method="get">
                        <input type="hidden" name="check_keywords" value="yes" />
                        <input type="hidden" name="area" value="default" />
                        <input class="search-input" autocomplete="off" type="search" name="q" placeholder="Search" />
                    </form>
                </li>
            </ul>
        </div>
    </header>
    
        
        
        <section id="page-container">
            <div class="width-wrapper flex">
                <article class="document-body">
                    
                    <ul class="rel-parents">
                    <li><a href="index.html" accesskey="U">Smithy Guides</a></li>
                    </ul>
                    
                    
  <div class="section" id="evolving-models">
<h1><a href="#evolving-models">Evolving Models</a></h1>
<p>This guide describes how to evolve Smithy models without breaking your
customers.</p>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">Table of contents</p>
<ul class="simple">
<li><a class="reference internal" href="#updating-services" id="id1">Updating services</a></li>
<li><a class="reference internal" href="#updating-operations" id="id2">Updating operations</a></li>
<li><a class="reference internal" href="#updating-structures" id="id3">Updating structures</a></li>
<li><a class="reference internal" href="#booleans-and-api-evolution" id="id4">Booleans and API evolution</a></li>
<li><a class="reference internal" href="#updating-unions" id="id5">Updating unions</a></li>
<li><a class="reference internal" href="#boxed-shapes" id="id6">Boxed shapes</a></li>
<li><a class="reference internal" href="#sparse-lists-and-maps" id="id7">Sparse lists and maps</a></li>
<li><a class="reference internal" href="#updating-traits" id="id8">Updating traits</a></li>
<li><a class="reference internal" href="#using-smithy-diff" id="id9">Using Smithy Diff</a></li>
</ul>
</div>
<div class="section" id="updating-services">
<h2><a href="#updating-services">Updating services</a></h2>
<p>The following changes to operation shapes are backward-compatible:</p>
<ol class="arabic simple">
<li>Adding operations.</li>
<li>Adding resources.</li>
</ol>
<p>The following changes are not backward-compatible:</p>
<ol class="arabic simple">
<li>Removing a resource or operation.</li>
<li>Renaming a shape that was already part of the service.</li>
</ol>
</div>
<div class="section" id="updating-operations">
<h2><a href="#updating-operations">Updating operations</a></h2>
<p>The following changes to operation shapes are backward-compatible:</p>
<ol class="arabic simple">
<li>Adding a new error shape if the error shape is only encountered under new
conditions that previously released clients/tools will not encounter.</li>
</ol>
<p>The following changes are not backward-compatible:</p>
<ol class="arabic simple">
<li>Changing the shape targeted by the input or output of an operation. For
example, it is not backward compatible to change an operation's input or
output from targeting <cite>smithy.api#Unit</cite> to then later target a different
shape.</li>
<li>Removing or renaming a resource or operation.</li>
<li>Removing an operation from a service or resource.</li>
<li>Removing a resource from a service.</li>
<li>Changing an operation from referencing an input/output structure to no
longer referencing an input/output structure.</li>
<li>Renaming an error that is referenced by an operation.</li>
<li>The addition, removal, or modification of traits applied to an operation or
members of the input/output of an operation MAY result in a breaking change
if it changes the wire representation of an operation or breaks behavior
that was previously relied upon by tooling.</li>
</ol>
</div>
<div class="section" id="updating-structures">
<h2><a href="#updating-structures">Updating structures</a></h2>
<p>The following changes to structure shapes are backward-compatible:</p>
<ol class="arabic simple">
<li>Adding new optional members to a structure.</li>
<li>Removing the <a class="reference internal" href="../spec/core/constraint-traits.html#required-trait"><span class="std std-ref">required trait</span></a> from a structure member marked with
the <a class="reference internal" href="../spec/core/type-refinement-traits.html#input-trait"><span class="std std-ref">input trait</span></a>.</li>
</ol>
<p>The following changes to a structure are not backward-compatible:</p>
<ol class="arabic simple">
<li>Renaming a member.</li>
<li>Removing a member.</li>
<li>Changing the shape targeted by a member.</li>
<li>Adding the required trait to a member.</li>
</ol>
</div>
<div class="section" id="booleans-and-api-evolution">
<h2><a href="#booleans-and-api-evolution">Booleans and API evolution</a></h2>
<p>A boolean shape is often used to model state flags; however, consider whether
or not the state of a resource is actually binary. If other states can be
added in the future, it is often better to use a string shape with an
<a class="reference internal" href="../spec/core/constraint-traits.html#enum-trait"><span class="std std-ref">enum trait</span></a> or a union shape.</p>
</div>
<div class="section" id="updating-unions">
<h2><a href="#updating-unions">Updating unions</a></h2>
<p>The following changes to union shapes are backward-compatible:</p>
<ol class="arabic simple">
<li>Adding a new member to a union. Unions in Smithy are considered &quot;open&quot;;
it is a backward-compatible change to add new members to a union. Smithy
clients SHOULD anticipate and account for receiving unknown members for
a union in a response from a service at runtime. Clients SHOULD NOT fail
when receiving unknown members from a service.</li>
</ol>
<p>The following changes are backward-incompatible:</p>
<ol class="arabic simple">
<li>Renaming a union member.</li>
<li>Removing a union member.</li>
<li>Changing the shape targeted by a union member.</li>
</ol>
</div>
<div class="section" id="boxed-shapes">
<h2><a href="#boxed-shapes">Boxed shapes</a></h2>
<p>The <a class="reference internal" href="../spec/core/type-refinement-traits.html#box-trait"><span class="std std-ref">box trait</span></a> is used to influence code generation in various
programming languages. It is a backward-incompatible change for the <code class="docutils literal notranslate"><span class="pre">box</span></code>
trait to be added or removed from a shape because it will affect types
generated by tooling that uses Smithy models.</p>
</div>
<div class="section" id="sparse-lists-and-maps">
<h2><a href="#sparse-lists-and-maps">Sparse lists and maps</a></h2>
<p>The <a class="reference internal" href="../spec/core/type-refinement-traits.html#sparse-trait"><span class="std std-ref">sparse trait</span></a> is used to influence code generation in various
programming languages. It is a backward-incompatible change for the <code class="docutils literal notranslate"><span class="pre">sparse</span></code>
trait to be added or removed from a shape because it will affect types
generated by tooling that uses Smithy models.</p>
</div>
<div class="section" id="updating-traits">
<h2><a href="#updating-traits">Updating traits</a></h2>
<p>The following changes to trait definitions are backward compatible:</p>
<ol class="arabic simple">
<li>Relaxing the selector of a trait.</li>
<li>Removing a trait from the <code class="docutils literal notranslate"><span class="pre">conflicts</span></code> list.</li>
<li>Removing the <code class="docutils literal notranslate"><span class="pre">structurallyExclusive</span></code> property.</li>
<li>Marking a trait as deprecated.</li>
</ol>
</div>
<div class="section" id="using-smithy-diff">
<h2><a href="#using-smithy-diff">Using Smithy Diff</a></h2>
<p><a class="reference external" href="https://github.com/awslabs/smithy/tree/main/smithy-diff">Smithy Diff</a> is a
tool used to compare two Smithy models to check for backward compatibility
issues. Smithy Diff can be run via a Java library or via the Smithy CLI.</p>
</div>
</div>


                    
                    <section class="relations">
                        
                        <a href="model-linters.html" title="previous chapter" class="previous-page clearfix hidden-xs">‚Üê Model linters</a>
                        
                        <a href="style-guide.html" title="next chapter" class="next-page clearfix">Style Guide ‚Üí</a>
                    </section>
                    
                </article><aside id="right-column" class="side-column hidden-sm">
                    <div class="column-body">
                        <section class="sidebar">
                            
                            <section class="next-previous">
                                
                                <a href="model-linters.html" title="previous chapter" class="previous-page clearfix hidden-xs">‚Üê Prev</a>
                                
                                <a href="style-guide.html" title="next chapter" class="next-page clearfix">Next ‚Üí</a>
                            </section>
                            
                            <ul>
<li><a class="reference internal" href="#">Evolving Models</a><ul>
<li><a class="reference internal" href="#updating-services">Updating services</a></li>
<li><a class="reference internal" href="#updating-operations">Updating operations</a></li>
<li><a class="reference internal" href="#updating-structures">Updating structures</a></li>
<li><a class="reference internal" href="#booleans-and-api-evolution">Booleans and API evolution</a></li>
<li><a class="reference internal" href="#updating-unions">Updating unions</a></li>
<li><a class="reference internal" href="#boxed-shapes">Boxed shapes</a></li>
<li><a class="reference internal" href="#sparse-lists-and-maps">Sparse lists and maps</a></li>
<li><a class="reference internal" href="#updating-traits">Updating traits</a></li>
<li><a class="reference internal" href="#using-smithy-diff">Using Smithy Diff</a></li>
</ul>
</li>
</ul>

                        </section>
                    </div>
                </aside></div>
        </section>
        
    
<footer id="footer">
    <div class="width-wrapper">
        <div class="copyright">
            <p>¬©2021, Amazon Web Services, Inc or its affiliates. All rights reserved.</p>
        </div>
    </div>
</footer>
  </body>
</html>