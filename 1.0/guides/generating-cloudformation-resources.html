
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Generating CloudFormation Resource Schemas from Smithy &#8212; Smithy 1.0 documentation</title><link rel="stylesheet" href="../../_static/bootstrap-reboot.css" type="text/css" />
    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/default.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" href="../../_static/custom-tabs.css" type="text/css" />

    
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/smithy.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="Converting Smithy to OpenAPI" href="converting-to-openapi.html" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="smithy-version" content="1.0">

  </head><body>
    <header>
        <div class="header-flex width-wrapper">
            <div class="site-logo">
                <a href="../../index.html">
                    <span class="logo-icon">üî®Ô∏è</span><span class="logo-text">Smithy</span>
                </a>
                <span class="version-text">1.0</span>
            </div>
            <ul id="page-navigation">
                <li class="site-page first"><a href="../../quickstart.html">Quick Start</a></li>
                <li class="site-page"><a href="../spec/index.html">Specifications</a></li>
                <li class="site-page"><a href="index.html">Guides</a></li>
                <li class="site-page"><a href="https://github.com/awslabs/smithy">Code</a></li>
                <li class="site-search hidden-sm">
                    <form action="../../search.html" method="get">
                        <input type="hidden" name="check_keywords" value="yes" />
                        <input type="hidden" name="area" value="default" />
                        <input class="search-input" autocomplete="off" type="search" name="q" placeholder="Search" />
                    </form>
                </li>
            </ul>
        </div>
    </header>
    
        
        
        <section id="page-container">
            <div class="width-wrapper flex">
                <article class="document-body">
                    
                    <ul class="rel-parents">
                    <li><a href="index.html" accesskey="U">Smithy Guides</a></li>
                    </ul>
                    
                    
  <div class="section" id="generating-cloudformation-resource-schemas-from-smithy">
<span id="smithy-to-cloudformation"></span><h1><a href="#generating-cloudformation-resource-schemas-from-smithy">Generating CloudFormation Resource Schemas from Smithy</a></h1>
<p>This guide describes how Smithy models can generate <a class="reference external" href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/resource-type-schema.html">CloudFormation Resource
Schemas</a>.</p>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title">Table of contents</p>
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id5">Introduction</a><ul>
<li><a class="reference internal" href="#differences-between-smithy-resources-and-cloudformation-resource-schemas" id="id6">Differences between Smithy resources and CloudFormation Resource Schemas</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generating-schemas-with-smithy-build" id="id7">Generating Schemas with smithy-build</a></li>
<li><a class="reference internal" href="#cloudformation-configuration-settings" id="id8">CloudFormation configuration settings</a></li>
<li><a class="reference internal" href="#json-schema-configuration-settings" id="id9">JSON schema configuration settings</a></li>
<li><a class="reference internal" href="#other-traits-that-influence-generation" id="id10">Other traits that influence generation</a></li>
<li><a class="reference internal" href="#generating-schemas-with-code" id="id11">Generating Schemas with code</a></li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a href="#introduction">Introduction</a></h2>
<p>CloudFormation Resource Schemas are the standard method of <a class="reference external" href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/resource-types.html">modeling a resource
provider</a> for use within <a class="reference external" href="https://aws.amazon.com/cloudformation/">CloudFormation</a>. These schemas can then be used
to <a class="reference external" href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/resource-type-develop.html">develop the resource provider</a> for support in CloudFormation. Generating
Resource Schemas automatically from Smithy resources removes the duplicate
effort of specifying them.</p>
<p><a class="reference internal" href="../spec/aws/aws-cloudformation.html#aws-cloudformation-traits"><span class="std std-ref">AWS CloudFormation traits</span></a> define how
CloudFormation Resource Schemas should be generated from Smithy resources.
Automatically generating schemas from a service's API lowers the effort needed
to generate and maintain them, keeps the schemas in sync with any changes to
the Smithy model, reduces the potential for errors in the translation, and
provides a more complete depiction of a resource in its schema. These schemas
can be utilized by the <a class="reference external" href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/what-is-cloudformation-cli.html">CloudFormation Command Line Interface</a> to build,
register, and deploy resource providers.</p>
<p><a class="reference internal" href="#generate-cloudformation-other-traits"><span class="std std-ref">Other traits may also influence CloudFormation Resource Schema
generation.</span></a></p>
<div class="section" id="differences-between-smithy-resources-and-cloudformation-resource-schemas">
<h3><a href="#differences-between-smithy-resources-and-cloudformation-resource-schemas">Differences between Smithy resources and CloudFormation Resource Schemas</a></h3>
<p>Smithy and CloudFormation have different approaches to modeling resources. In
Smithy, a <a class="reference internal" href="../spec/core/model.html#resource"><span class="std std-ref">resource</span></a> is an entity with an identity that has a
set of operations. CloudFormation resources are defined as a collection of
properties and their attributes, along with additional information on which
properties are identifiers or have restrictions on their mutability.</p>
</div>
</div>
<div class="section" id="generating-schemas-with-smithy-build">
<h2><a href="#generating-schemas-with-smithy-build">Generating Schemas with smithy-build</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">cloudformation</span></code> plugin contained in the <code class="docutils literal notranslate"><span class="pre">software.amazon.smithy:smithy-aws-cloudformation</span></code>
package can be used with smithy-build and the <a class="reference external" href="https://github.com/awslabs/smithy-gradle-plugin">Smithy Gradle plugin</a> to
generate CloudFormation Resource Schemas from Smithy models.</p>
<p>The following example shows how to configure Gradle to generate CloudFormation
Resource Schemas from a Smithy model <a class="reference internal" href="building-models/gradle-plugin.html#artifacts-from-smithy-models"><span class="std std-ref">using a buildscript dependency</span></a>:</p>
<div class="literal-block-wrapper docutils container" id="cfn-smithy-build-gradle">
<div class="code-block-caption"><span class="caption-text">build.gradle.kts</span><a class="headerlink" href="#cfn-smithy-build-gradle" title="Permalink to this code">¬∂</a></div>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="n">plugins</span> <span class="p">{</span>
    <span class="n">java</span>
    <span class="n">id</span><span class="p">(</span><span class="s">&quot;software.amazon.smithy&quot;</span><span class="p">).</span><span class="na">version</span><span class="p">(</span><span class="s">&quot;0.6.0&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">buildscript</span> <span class="p">{</span>
    <span class="n">dependencies</span> <span class="p">{</span>
        <span class="n">classpath</span><span class="p">(</span><span class="s">&quot;software.amazon.smithy:smithy-aws-cloudformation:1.21.0&quot;</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>The Smithy Gradle plugin relies on a <code class="docutils literal notranslate"><span class="pre">smithy-build.json</span></code> file found at the
root of a project to define the actual process of generating the CloudFormation
Resource Schemas. The following example defines a <code class="docutils literal notranslate"><span class="pre">smithy-build.json</span></code> file
that generates a CloudFormation Resource Schemas for the specified resource
shapes bound to the <code class="docutils literal notranslate"><span class="pre">smithy.example#Queues</span></code> service using the <code class="docutils literal notranslate"><span class="pre">Smithy</span></code>
organization.</p>
<div class="literal-block-wrapper docutils container" id="cfn-smithy-build-json">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#cfn-smithy-build-json" title="Permalink to this code">¬∂</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;plugins&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;cloudformation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;service&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Queues&quot;</span><span class="p">,</span>
            <span class="nt">&quot;organizationName&quot;</span><span class="p">:</span> <span class="s2">&quot;Smithy&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>AWS Service teams SHOULD NOT set the <code class="docutils literal notranslate"><span class="pre">organizationName</span></code> property, and instead
use the <a class="reference internal" href="../spec/aws/aws-core.html#service-cloudformation-name"><span class="std std-ref">cloudFormationName property of the aws.api#service trait</span></a>. The following configuration and model would
generate one Resource Schema with the <code class="docutils literal notranslate"><span class="pre">typeName</span></code> of <code class="docutils literal notranslate"><span class="pre">AWS:Queues:Queue</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">smithy-build.json</span><a class="headerlink" href="#id3" title="Permalink to this code">¬∂</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;plugins&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;cloudformation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;service&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#QueueService&quot;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">model.smithy</span><a class="headerlink" href="#id4" title="Permalink to this code">¬∂</a></div>
<div class="highlight-smithy notranslate"><div class="highlight"><pre><span></span><span class="kd">namespace</span><span class="nc"> smithy.example</span><span class="w"></span>

<span class="kd">use</span><span class="nc"> aws.api#service</span><span class="w"></span>

<span class="nd">@service</span>(<span class="nl">sdkId:</span><span class="w"> </span><span class="s2">&quot;Queues&quot;</span><span class="p">,</span><span class="w"> </span><span class="nl">cloudFormationName:</span><span class="w"> </span><span class="s2">&quot;Queues&quot;</span>)<span class="w"></span>
<span class="kd">service</span><span class="nc"> QueueService</span><span class="w"> </span>{<span class="w"></span>
<span class="w">    </span><span class="nl">version:</span><span class="w"> </span><span class="s2">&quot;2020-07-02&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nl">resources:</span><span class="w"> </span>[<span class="vc">Queue</span>]<span class="p">,</span><span class="w"></span>
}<span class="w"></span>
</pre></div>
</div>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">A buildscript dependency on &quot;software.amazon.smithy:smithy-aws-cloudformation:1.21.0&quot; is
required in order for smithy-build to map the &quot;cloudformation&quot; plugin name
to the correct Java library implementation.</p>
</div>
</div>
<div class="section" id="cloudformation-configuration-settings">
<h2><a href="#cloudformation-configuration-settings">CloudFormation configuration settings</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">cloudformation</span></code> plugin provides configuration options to influence the
Resource Schemas that it generates.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">You typically only need to configure the <code class="docutils literal notranslate"><span class="pre">service</span></code> and
<code class="docutils literal notranslate"><span class="pre">organizationName</span></code> settings to generate Resource Schemas.</p>
</div>
<p>The following settings are supported:</p>
<dl class="docutils" id="generate-cloudformation-setting-service">
<dt>service (<code class="docutils literal notranslate"><span class="pre">string</span></code>)</dt><dd><p><strong>Required</strong>. The Smithy service <a class="reference internal" href="../spec/core/model.html#shape-id"><span class="std std-ref">shape ID</span></a> to convert.
For example, <code class="docutils literal notranslate"><span class="pre">smithy.example#Queues</span></code>.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;plugins&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;cloudformation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;service&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Queues&quot;</span><span class="p">,</span>
            <span class="nt">&quot;organizationName&quot;</span><span class="p">:</span> <span class="s2">&quot;Smithy&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="docutils" id="generate-cloudformation-setting-organizationname">
<dt>organizationName (<code class="docutils literal notranslate"><span class="pre">string</span></code>)</dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">Organization</span></code> component of the resource's <a class="reference external" href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/resource-type-schema.html#schema-properties-typeName">type name</a>. Defaults to
&quot;AWS&quot; if the <a class="reference internal" href="../spec/aws/aws-core.html#aws-api-service-trait"><span class="std std-ref">aws.api#service trait</span></a> is present, otherwise is
<strong>required</strong>.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;plugins&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;cloudformation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;service&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Queues&quot;</span><span class="p">,</span>
            <span class="nt">&quot;organizationName&quot;</span><span class="p">:</span> <span class="s2">&quot;Smithy&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="docutils" id="generate-cloudformation-setting-servicename">
<dt>serviceName (<code class="docutils literal notranslate"><span class="pre">string</span></code>)</dt><dd><p>Allows overriding the <code class="docutils literal notranslate"><span class="pre">Service</span></code> component of the resource's <a class="reference external" href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/resource-type-schema.html#schema-properties-typeName">type name</a>.
This value defaults to the <a class="reference internal" href="../spec/aws/aws-core.html#service-cloudformation-name"><span class="std std-ref">cloudFormationName property of the
aws.api#service trait</span></a> if present, or the
shape name of the specified service shape otherwise.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;plugins&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;cloudformation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;service&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#QueueService&quot;</span><span class="p">,</span>
            <span class="nt">&quot;organizationName&quot;</span><span class="p">:</span> <span class="s2">&quot;Smithy&quot;</span><span class="p">,</span>
            <span class="nt">&quot;serviceName&quot;</span><span class="p">:</span> <span class="s2">&quot;Queues&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="docutils" id="generate-cloudformation-setting-externaldocs">
<dt>externalDocs (<code class="docutils literal notranslate"><span class="pre">[string]</span></code>)</dt><dd><p>Limits the source of generated <a class="reference external" href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/resource-type-schema.html#schema-properties-documentationUrl">&quot;documentationUrl&quot; fields</a> to the
specified priority ordered list of names in an <a class="reference internal" href="../spec/core/documentation-traits.html#externaldocumentation-trait"><span class="std std-ref">externalDocumentation trait</span></a>.
This list is case insensitive. By default, this is a list of the following
values: &quot;Documentation Url&quot;, &quot;DocumentationUrl&quot;, &quot;API Reference&quot;, &quot;User
Guide&quot;, &quot;Developer Guide&quot;, &quot;Reference&quot;, and &quot;Guide&quot;.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;plugins&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;cloudformation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;service&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Queues&quot;</span><span class="p">,</span>
            <span class="nt">&quot;organizationName&quot;</span><span class="p">:</span> <span class="s2">&quot;Smithy&quot;</span><span class="p">,</span>
            <span class="nt">&quot;externalDocs&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;Documentation Url&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Custom&quot;</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="docutils" id="generate-cloudformation-setting-sourcedocs">
<dt>sourceDocs (<code class="docutils literal notranslate"><span class="pre">[string]</span></code>)</dt><dd><p>Limits the source of generated <a class="reference external" href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/resource-type-schema.html#schema-properties-sourceUrl">&quot;sourceUrl&quot; fields</a> to the specified
priority ordered list of names in an <a class="reference internal" href="../spec/core/documentation-traits.html#externaldocumentation-trait"><span class="std std-ref">externalDocumentation trait</span></a>.
This list is case insensitive. By default, this is a list of the following
values: &quot;Source Url&quot;, &quot;SourceUrl&quot;, &quot;Source&quot;, and &quot;Source Code&quot;.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;plugins&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;cloudformation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;service&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Queues&quot;</span><span class="p">,</span>
            <span class="nt">&quot;organizationName&quot;</span><span class="p">:</span> <span class="s2">&quot;Smithy&quot;</span><span class="p">,</span>
            <span class="nt">&quot;sourceDocs&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;Source Url&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Custom&quot;</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="docutils" id="generate-cloudformation-setting-jsonadd">
<dt>jsonAdd (<code class="docutils literal notranslate"><span class="pre">Map&lt;String,</span> <span class="pre">Map&lt;String,</span> <span class="pre">Node&gt;&gt;</span></code>)</dt><dd><p>Adds or replaces the JSON value in the generated Resource Schemas at the
given JSON pointer locations with a different JSON value. The value must be
a map where each key is a resource shape ID. The value is a map where each
key is a valid JSON pointer string as defined in <span class="target" id="index-0"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc6901.html"><strong>RFC 6901</strong></a>. Each value in
the nested map is the JSON value to add or replace at the given target.</p>
<p>Values are added using similar semantics of the &quot;add&quot; operation of
JSON Patch, as specified in <span class="target" id="index-1"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc6902.html"><strong>RFC 6902</strong></a>, with the exception that adding
properties to an undefined object will create nested objects in the
result as needed.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;plugins&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;cloudformation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;service&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Queues&quot;</span><span class="p">,</span>
            <span class="nt">&quot;organizationName&quot;</span><span class="p">:</span> <span class="s2">&quot;Smithy&quot;</span><span class="p">,</span>
            <span class="nt">&quot;jsonAdd&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;smithy.example#Queue&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;/info/title&quot;</span><span class="p">:</span> <span class="s2">&quot;Replaced title value&quot;</span><span class="p">,</span>
                    <span class="nt">&quot;/info/nested/foo&quot;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="nt">&quot;hi&quot;</span><span class="p">:</span> <span class="s2">&quot;Adding this object created intermediate objects too!&quot;</span>
                    <span class="p">},</span>
                    <span class="nt">&quot;/info/nested/foo/baz&quot;</span><span class="p">:</span> <span class="kc">true</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="docutils" id="generate-cloudformation-setting-disablehandlerpermissiongeneration">
<dt>disableHandlerPermissionGeneration (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)</dt><dd><p>Sets whether to disable generating <code class="docutils literal notranslate"><span class="pre">handler</span></code> <code class="docutils literal notranslate"><span class="pre">permission</span></code> lists for
Resource Schemas. By default, handler permissions lists are automatically
added to schemas based on <a class="reference internal" href="../spec/core/model.html#lifecycle-operations"><span class="std std-ref">Resource lifecycle operations</span></a> and permissions
listed in the <a class="reference internal" href="../spec/aws/aws-iam.html#aws-iam-requiredactions-trait"><span class="std std-ref">aws.iam#requiredActions trait</span></a> on the operation. See
<a class="reference external" href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/resource-type-schema.html#schema-properties-handlers">the handlers section</a> in the CloudFormation Resource Schemas
documentation for more information.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;plugins&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;cloudformation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;service&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Queues&quot;</span><span class="p">,</span>
            <span class="nt">&quot;organizationName&quot;</span><span class="p">:</span> <span class="s2">&quot;Smithy&quot;</span><span class="p">,</span>
            <span class="nt">&quot;disableHandlerPermissionGeneration&quot;</span><span class="p">:</span> <span class="kc">true</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>CloudFormation Resource Schema handlers determine what provisioning actions
can be performed for the resource. The handlers utilized by CloudFormation
align with some <a class="reference internal" href="../spec/core/model.html#lifecycle-operations"><span class="std std-ref">Resource lifecycle operations</span></a>. These operations can also
define other permission actions required to invoke them with the <a class="reference internal" href="../spec/aws/aws-iam.html#aws-iam-requiredactions-trait"><span class="std std-ref">aws.iam#requiredActions trait</span></a>.</p>
<p>When handler permission generation is enabled, all the actions required to
invoke the operations related to the handler, including the actions for the
operations themselves, are used to populate permission lists:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;handlers&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;create&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;permissions&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;dependency:GetDependencyComponent&quot;</span><span class="p">,</span>
            <span class="s2">&quot;queues:CreateQueue&quot;</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="nt">&quot;read&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;permissions&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;queues:GetQueue&quot;</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="nt">&quot;update&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;permissions&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;dependency:GetDependencyComponent&quot;</span><span class="p">,</span>
            <span class="s2">&quot;queues:UpdateQueue&quot;</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="nt">&quot;delete&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;permissions&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;queues:DeleteQueue&quot;</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="nt">&quot;list&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;permissions&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;queues:ListQueues&quot;</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">},</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="docutils" id="generate-cloudformation-setting-disabledeprecatedpropertygeneration">
<dt>disableDeprecatedPropertyGeneration (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)</dt><dd><p>Sets whether to disable generating <code class="docutils literal notranslate"><span class="pre">deprecatedProperties</span></code> for Resource
Schemas. By default, deprecated members are automatically added to the
<code class="docutils literal notranslate"><span class="pre">deprecatedProperties</span></code> schema property. See <a class="reference external" href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/resource-type-schema.html#schema-properties-deprecatedproperties">the deprecatedProperties
section</a> in the CloudFormation Resource Schemas documentation for more
information.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;plugins&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;cloudformation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;service&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Queues&quot;</span><span class="p">,</span>
            <span class="nt">&quot;organizationName&quot;</span><span class="p">:</span> <span class="s2">&quot;Smithy&quot;</span><span class="p">,</span>
            <span class="nt">&quot;disableDeprecatedPropertyGeneration&quot;</span><span class="p">:</span> <span class="kc">true</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="docutils" id="generate-cloudformation-setting-disablerequiredpropertygeneration">
<dt>disableRequiredPropertyGeneration (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)</dt><dd><p>Sets whether to disable generating <code class="docutils literal notranslate"><span class="pre">required</span></code> for Resource Schemas. By
default, required members are automatically added to the <code class="docutils literal notranslate"><span class="pre">required</span></code>
schema property. See <a class="reference external" href="https://docs.aws.amazon.com/cloudformation-cli/latest/userguide/resource-type-schema.html#schema-properties-required">the required property section</a> in the CloudFormation
Resource Schemas documentation for more information.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;plugins&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;cloudformation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;service&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Queues&quot;</span><span class="p">,</span>
            <span class="nt">&quot;organizationName&quot;</span><span class="p">:</span> <span class="s2">&quot;Smithy&quot;</span><span class="p">,</span>
            <span class="nt">&quot;disableRequiredPropertyGeneration&quot;</span><span class="p">:</span> <span class="kc">true</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="docutils" id="generate-cloudformation-setting-disablecapitalizedproperties">
<dt>disableCapitalizedProperties (<code class="docutils literal notranslate"><span class="pre">boolean</span></code>)</dt><dd><p>Sets whether to disable automatically capitalizing names of properties of
Resource Schemas. By default, property names of resource schemas are
capitalized if no <a class="reference internal" href="../spec/aws/aws-cloudformation.html#aws-cloudformation-cfnname-trait"><span class="std std-ref">cfnName</span></a> trait
is applied.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;plugins&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;cloudformation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;service&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Queues&quot;</span><span class="p">,</span>
            <span class="nt">&quot;organizationName&quot;</span><span class="p">:</span> <span class="s2">&quot;Smithy&quot;</span><span class="p">,</span>
            <span class="nt">&quot;disableCapitalizedProperties&quot;</span><span class="p">:</span> <span class="kc">true</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="json-schema-configuration-settings">
<h2><a href="#json-schema-configuration-settings">JSON schema configuration settings</a></h2>
<dl class="docutils" id="generate-cloudformation-jsonschema-setting-defaulttimestampformat">
<dt>defaultTimestampFormat (<code class="docutils literal notranslate"><span class="pre">string</span></code>)</dt><dd><p>Sets the assumed <a class="reference internal" href="../spec/core/protocol-traits.html#timestampformat-trait"><span class="std std-ref">timestampFormat trait</span></a> value for timestamps with
no explicit timestampFormat trait. The provided value is expected to be
a string. Defaults to &quot;date-time&quot; if not set. Can be set to &quot;date-time&quot;,
&quot;epoch-seconds&quot;, or &quot;http-date&quot;.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;plugins&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;cloudformation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;service&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Queues&quot;</span><span class="p">,</span>
            <span class="nt">&quot;organizationName&quot;</span><span class="p">:</span> <span class="s2">&quot;Smithy&quot;</span><span class="p">,</span>
            <span class="nt">&quot;defaultTimestampFormat&quot;</span><span class="p">:</span> <span class="s2">&quot;epoch-seconds&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="docutils" id="generate-cloudformation-jsonschema-setting-schemadocumentextensions">
<dt>schemaDocumentExtensions (<code class="docutils literal notranslate"><span class="pre">Map&lt;String,</span> <span class="pre">any&gt;</span></code>)</dt><dd><p>Adds custom top-level key-value pairs to all of the generated
CloudFormation Resource Schemas. Any existing value is overwritten.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;plugins&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;cloudformation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;service&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Queues&quot;</span><span class="p">,</span>
            <span class="nt">&quot;organizationName&quot;</span><span class="p">:</span> <span class="s2">&quot;Smithy&quot;</span><span class="p">,</span>
            <span class="nt">&quot;schemaDocumentExtensions&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;x-my-custom-top-level-property&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello!&quot;</span><span class="p">,</span>
                <span class="nt">&quot;x-another-custom-top-level-property&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;can be&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;complex&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="s2">&quot;too!&quot;</span><span class="p">]</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="docutils" id="generate-cloudformation-jsonschema-setting-disablefeatures">
<dt>disableFeatures (<code class="docutils literal notranslate"><span class="pre">[string]</span></code>)</dt><dd><p>Disables JSON schema and CloudFormation schema property names from
appearing in the generated CloudFormation Resource Schemas.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;plugins&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;cloudformation&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;service&quot;</span><span class="p">:</span> <span class="s2">&quot;smithy.example#Queues&quot;</span><span class="p">,</span>
            <span class="nt">&quot;organizationName&quot;</span><span class="p">:</span> <span class="s2">&quot;Smithy&quot;</span><span class="p">,</span>
            <span class="nt">&quot;disableFeatures&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;propertyNames&quot;</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="other-traits-that-influence-generation">
<span id="generate-cloudformation-other-traits"></span><h2><a href="#other-traits-that-influence-generation">Other traits that influence generation</a></h2>
<p>In addition to the <a class="reference internal" href="../spec/aws/aws-cloudformation.html#aws-cloudformation-traits"><span class="std std-ref">AWS CloudFormation traits</span></a>,
the following traits affect the generation of CloudFormation Resource Schemas.</p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">documentation</span></code></dt><dd>When applied to a <a class="reference internal" href="../spec/core/model.html#resource"><span class="std std-ref">Resource</span></a> shape, the contents will be converted
into the <code class="docutils literal notranslate"><span class="pre">description</span></code> property of the generated Resource Schema.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">externalDocumentation</span></code></dt><dd>When applied to a <a class="reference internal" href="../spec/core/model.html#resource"><span class="std std-ref">resource</span></a> shape, the contents will be
converted according to the <a class="reference internal" href="#generate-cloudformation-setting-externaldocs"><span class="std std-ref">externalDocs</span></a>
and <a class="reference internal" href="#generate-cloudformation-setting-sourcedocs"><span class="std std-ref">sourceDocs</span></a>
settings.</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference internal" href="../spec/core/model.html#trait-shapes"><span class="std std-ref">Custom traits</span></a> defined in a Smithy model are not
converted and added to CloudFormation Resource Schemas. Doing so requires
the creation of a custom <code class="docutils literal notranslate"><span class="pre">software.amazon.smithy.aws.cloudformation.schema.fromsmithy.Smithy2CfnExtension</span></code>.</p>
</div>
</div>
<div class="section" id="generating-schemas-with-code">
<h2><a href="#generating-schemas-with-code">Generating Schemas with code</a></h2>
<p>Developers that need more advanced control over the generation of
CloudFormation resources from Smithy can use the
<code class="docutils literal notranslate"><span class="pre">software.amazon.smithy:smithy-aws-cloudformation</span></code> Java library to perform
the generation.</p>
<p>First, you'll need to get a copy of the library. The following example shows
how to install <code class="docutils literal notranslate"><span class="pre">software.amazon.smithy:smithy-aws-cloudformation</span></code> through
Gradle:</p>
<div class="literal-block-wrapper docutils container" id="cfn-code-build-gradle">
<div class="code-block-caption"><span class="caption-text">build.gradle.kts</span><a class="headerlink" href="#cfn-code-build-gradle" title="Permalink to this code">¬∂</a></div>
<div class="highlight-kotlin notranslate"><div class="highlight"><pre><span></span><span class="n">buildscript</span> <span class="p">{</span>
    <span class="n">dependencies</span> <span class="p">{</span>
        <span class="n">classpath</span><span class="p">(</span><span class="s">&quot;software.amazon.smithy:smithy-aws-cloudformation:1.21.0&quot;</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>Next, you need to create and configure a <code class="docutils literal notranslate"><span class="pre">CloudFormationConverter</span></code>:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.List</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">software.amazon.smithy.model.shapes.ShapeId</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">software.amazon.smithy.aws.cloudformation.schema.CfnConfig</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">software.amazon.smithy.aws.cloudformation.schema.fromsmithy.CfnConverter</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">software.amazon.smithy.aws.cloudformation.schema.model.ResourceSchema</span><span class="p">;</span>

<span class="n">CfnConverter</span> <span class="n">converter</span> <span class="o">=</span> <span class="n">CfnConverter</span><span class="p">.</span><span class="na">create</span><span class="p">();</span>

<span class="c1">// Add any necessary configuration settings.</span>
<span class="n">CfnConfig</span> <span class="n">config</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CfnConfig</span><span class="p">();</span>
<span class="n">config</span><span class="p">.</span><span class="na">setService</span><span class="p">(</span><span class="n">ShapeId</span><span class="p">.</span><span class="na">from</span><span class="p">(</span><span class="s">&quot;smithy.example#Queues&quot;</span><span class="p">));</span>
<span class="n">config</span><span class="p">.</span><span class="na">setOrganizationName</span><span class="p">(</span><span class="s">&quot;Smithy&quot;</span><span class="p">);</span>

<span class="c1">// Generate the schemas.</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">ResourceSchema</span><span class="o">&gt;</span> <span class="n">schemas</span> <span class="o">=</span> <span class="n">converter</span><span class="p">.</span><span class="na">convert</span><span class="p">(</span><span class="n">myModel</span><span class="p">);</span>
</pre></div>
</div>
<p>The conversion process is highly extensible through
<code class="docutils literal notranslate"><span class="pre">software.amazon.smithy.aws.cloudformation.schema.fromsmithy.Smithy2CfnExtension</span></code>
service providers. See the <a class="reference external" href="https://awslabs.github.io/smithy/javadoc/1.21.0/software/amazon/smithy/aws/cloudformation/schema/fromsmithy/Smithy2CfnExtension.html">Javadocs</a> for more information.</p>
</div>
</div>


                    
                    <section class="relations">
                        
                        <a href="converting-to-openapi.html" title="previous chapter" class="previous-page clearfix hidden-xs">‚Üê Converting Smithy to OpenAPI</a>
                        
                    </section>
                    
                </article><aside id="right-column" class="side-column hidden-sm">
                    <div class="column-body">
                        <section class="sidebar">
                            
                            <section class="next-previous">
                                
                                <a href="converting-to-openapi.html" title="previous chapter" class="previous-page clearfix hidden-xs">‚Üê Prev</a>
                                
                            </section>
                            
                            <ul>
<li><a class="reference internal" href="#">Generating CloudFormation Resource Schemas from Smithy</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#differences-between-smithy-resources-and-cloudformation-resource-schemas">Differences between Smithy resources and CloudFormation Resource Schemas</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generating-schemas-with-smithy-build">Generating Schemas with smithy-build</a></li>
<li><a class="reference internal" href="#cloudformation-configuration-settings">CloudFormation configuration settings</a></li>
<li><a class="reference internal" href="#json-schema-configuration-settings">JSON schema configuration settings</a></li>
<li><a class="reference internal" href="#other-traits-that-influence-generation">Other traits that influence generation</a></li>
<li><a class="reference internal" href="#generating-schemas-with-code">Generating Schemas with code</a></li>
</ul>
</li>
</ul>

                        </section>
                    </div>
                </aside></div>
        </section>
        
    
<footer id="footer">
    <div class="width-wrapper">
        <div class="copyright">
            <p>¬©2021, Amazon Web Services, Inc or its affiliates. All rights reserved.</p>
        </div>
    </div>
</footer>
  </body>
</html>